{{!< default}}

<div class="consultant-wrapper gh-outer">
    <header class="gh-article-header hero">
        <p class="hero-tag">Partner Perpajakan Tepercaya</p>
        <h1 class="gh-article-title">Temukan Partner Perpajakan Anda</h1>
        <p class="hero-description">Direktori partner perpajakan dari berbagai kota yang siap membantu mengurus pajak Anda, baik secara online maupun tatap muka. Semua partner terverifikasi dan memiliki profil layanan yang jelas, sehingga Anda dapat memilih pendamping pajak yang tepat.</p>
        <p class="hero-subheadline">Solusi perpajakan yang mudah, cepat, dan profesional melalui jaringan partner terpercaya di seluruh Indonesia.</p>
    </header>

    <aside class="consultant-sidebar">
        <h2>Filter lokasi</h2>
        <ul>
            {{! This list will be populated by JavaScript }}
        </ul>
    </aside>

    <div class="consultant-main">
        <main class="site-main">
            <article class="gh-article post">
                
                <div class="gh-article-content">
                    {{#get 'authors' include='count.posts'}}
                        <div class="author-grid" id="author-grid-masonry">
                            {{#foreach authors}}
                                <div class="author-item" data-location="    {{location}}">
                                    {{> "author-box" }}
                                </div>
                            {{/foreach}}
                        </div>
                    {{/get}}
                </div>
            </article>
        </main>
    </div>
</div>


<script>
document.addEventListener('DOMContentLoaded', function () {
    // Filtering logic
    const authorElements = document.querySelectorAll('.author-item[data-location]');
    const locations = new Set();
    authorElements.forEach(author => {
        const location = author.dataset.location.trim();
        if (location) {
            locations.add(location);
        }
    });

    const filterList = document.querySelector('.consultant-sidebar ul');
    if (filterList) {
        filterList.innerHTML = '<li><a href="#" class="active" data-location="all">All Locations</a></li>';
        const sortedLocations = Array.from(locations).sort();
        sortedLocations.forEach(location => {
            const listItem = document.createElement('li');
            listItem.innerHTML = `<a href="#" data-location="${location}">${location}</a>`;
            filterList.appendChild(listItem);
        });

        filterList.addEventListener('click', function (e) {
            if (e.target.tagName === 'A') {
                e.preventDefault();
                const selectedLocation = e.target.dataset.location;
                filterList.querySelectorAll('a').forEach(a => a.classList.remove('active'));
                e.target.classList.add('active');
                authorElements.forEach(author => {
                    if (selectedLocation === 'all' || author.dataset.location.trim() === selectedLocation) {
                        author.style.display = '';
                    } else {
                        author.style.display = 'none';
                    }
                });
            }
        });
    }

    // Masonry Grid Logic
    const masonryGrid = document.getElementById('author-grid-masonry');
    if (masonryGrid) {
        const columnWidth = 300;
        const gap = 20;

        function createMasonryGrid() {
            const gridWidth = masonryGrid.offsetWidth;
            let columns = Math.floor(gridWidth / columnWidth) || 1;
            columns = Math.min(2, columns); // Cap at 2 columns
            masonryGrid.style.columnCount = columns.toString();
            masonryGrid.style.columnGap = `${gap}px`;
            const items = Array.from(masonryGrid.children);
            items.forEach(item => {
                item.style.breakInside = 'avoid-column';
                item.style.marginBottom = `${gap}px`;
            });
        }

        createMasonryGrid();
        window.addEventListener('resize', createMasonryGrid);
        window.addEventListener('load', createMasonryGrid);

        const observer = new MutationObserver(createMasonryGrid);
        observer.observe(masonryGrid, {
            attributes: true,
            childList: true,
            subtree: true,
        });
    }
});
</script>


<style>
    .consultant-wrapper {
        display: grid;
        grid-template-areas:
            "hero"
            "sidebar"
            "main";
        gap: 20px;
        padding: 20px;
    }

    @media (min-width: 768px) {
        .consultant-wrapper {
            grid-template-columns: 250px 1fr;
            grid-template-areas:
                "hero hero"
                "sidebar main";
        }
    }

    .hero {
        grid-area: hero;
        text-align: center;
        padding: 60px 20px;
    }

    .hero-tag {
        font-size: 1.2rem;
        font-weight: 600;
        color: var(--ghost-accent-color);
        margin-bottom: 10px;
    }

    .gh-article-title {
        margin-bottom: 20px;
    }

    .hero-description {
        font-size: 1.4rem;
        max-width: 600px;
        margin: 0 auto 20px;
    }

    .hero-subheadline {
        font-size: 1.3rem;
        font-style: italic;
        max-width: 600px;
        margin: 0 auto;
    }

    .consultant-sidebar {
        grid-area: sidebar;
        border: 1px solid #eee;
        padding: 20px;
    }

    .consultant-sidebar ul {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .consultant-sidebar li a {
        display: block;
        padding: 5px 0;
        text-decoration: none;
        color: var(--ghost-accent-color);
    }

    .consultant-sidebar li a.active {
        font-weight: bold;
    }

    .consultant-main {
        grid-area: main;
    }

    .author-grid {
        /* Masonry styles are applied by JavaScript */
    }
    .author-card {
        border: 1px solid #eee;
        padding: 20px;
        text-align: center;
    }
    .author-image {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        object-fit: cover;
    }
</style>